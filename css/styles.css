:root {
	--color-primary: #a78bfa;
	--color-primary-dark: #8f76e5;
	--color-primary-soft: rgba(167, 139, 250, 0.12);
	--color-highlight: #f9fe5a;
	--color-surface: #ffffff;
	--color-surface-alt: rgba(255, 255, 255, 0.72);
	--color-background: #f8f4ed;
	--color-text: #131313;
	--color-muted: rgba(19, 19, 19, 0.56);
	--color-border: rgba(19, 19, 19, 0.08);
	--color-border-strong: rgba(19, 19, 19, 0.16);
	--color-success: #33b864;
	--radius-xs: 10px;
	--radius-sm: 14px;
	--radius-md: 18px;
	--radius-lg: 28px;
	--shadow-soft: 0 24px 60px rgba(15, 15, 30, 0.08);
	.file-meta {
		margin: 0;
		font-size: 0.85rem;
		color: var(--color-muted);
	}

	--shadow-focus: 0 0 0 3px rgba(249, 254, 90, 0.45);
	--transition: 200ms ease;
	--font-family: 'Nunito', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

* {
	box-sizing: border-box;
	-webkit-tap-highlight-color: transparent;
	.start-button .text-button {
		position: relative;
		z-index: 1;
	}

}

html,
body {
	height: 100%;
 	touch-action: pan-y;
}

body {
	margin: 0;
	font-family: var(--font-family);
	background: radial-gradient(120% 120% at 50% -20%, rgba(167, 139, 250, 0.12) 0%, rgba(248, 244, 237, 0) 55%), var(--color-background);
	color: var(--color-text);
	display: flex;
	flex-direction: column;
	align-items: stretch;
	justify-content: flex-start;
	min-height: 100vh;
	min-height: 100dvh;
	overflow-x: hidden;
	transition: filter var(--transition), backdrop-filter var(--transition);
}

body.settings-open {
	overflow: hidden;
}

body.settings-open .app-shell {
	filter: blur(8px);
}

.top-bar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 0.75rem;
	padding: 0.6rem 0.75rem;
	border: 1px solid var(--color-border);
	border-radius: var(--radius-lg);
	background: var(--color-surface-alt);
	box-shadow: var(--shadow-soft);
}

.brand {
	display: flex;
	align-items: center;
	gap: 0.45rem;
	font-weight: 700;
	color: var(--color-text);
}

.brand-name {
	font-size: 1rem;
	letter-spacing: 0.02em;
}

body[data-stage="rendering"] {
	cursor: progress;
}

.visually-hidden,
.sr-only {
	position: absolute !important;
	width: 1px !important;
	height: 1px !important;
	padding: 0 !important;
	margin: -1px !important;
	overflow: hidden !important;
	clip: rect(0, 0, 0, 0) !important;
	white-space: nowrap !important;
	border: 0 !important;
}

.app-shell {
	flex: 1 1 auto;
	display: flex;
	flex-direction: column;
	padding: clamp(0.8rem, 2.5vh, 1.6rem);
	gap: clamp(0.65rem, 2vh, 1.2rem);
	width: min(100%, 420px);
	margin: 0 auto;
	min-height: 0;
}

.loader-wrapper {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
	width: clamp(140px, 32vw, 200px);
	aspect-ratio: 1 / 1;
	font-family: var(--font-family);
	font-size: 1.05rem;
	font-weight: 500;
	color: #ffffff;
	border-radius: 50%;
	background: radial-gradient(circle at 50% 30%, rgba(110, 72, 246, 0.42), rgba(110, 72, 246, 0));
	box-shadow: inset 0 8px 28px rgba(19, 19, 19, 0.08), 0 18px 38px rgba(110, 72, 246, 0.16);
	-webkit-user-select: none;
	user-select: none;
	overflow: hidden;
}

.loader {
	position: absolute;
	inset: 0;
	border-radius: 50%;
	background: transparent;
	animation: loader-rotate 2s linear infinite;
}

@keyframes loader-rotate {
	0% {
		transform: rotate(90deg);
		box-shadow:
			0 12px 26px 0 rgba(255, 255, 255, 0.65) inset,
			0 24px 36px 0 rgba(173, 95, 255, 0.48) inset,
			0 60px 72px 0 rgba(71, 30, 236, 0.58) inset;
	}
	50% {
		transform: rotate(270deg);
		box-shadow:
			0 12px 26px 0 rgba(255, 255, 255, 0.6) inset,
			0 24px 18px 0 rgba(214, 10, 71, 0.55) inset,
			0 48px 64px 0 rgba(49, 30, 128, 0.65) inset;
	}
	100% {
		transform: rotate(450deg);
		box-shadow:
			0 12px 26px 0 rgba(255, 255, 255, 0.65) inset,
			0 24px 36px 0 rgba(173, 95, 255, 0.48) inset,
			0 60px 72px 0 rgba(71, 30, 236, 0.58) inset;
	}
}

.loader-letter {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 1.4ch;
	height: 1.4ch;
	font-family: inherit;
	opacity: 0.45;
	transform: translateY(0);
	animation: loader-letter-anim 2s infinite;
	z-index: 1;
	border-radius: 999px;
	text-transform: lowercase;
	text-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
}

.loader-letter:nth-child(1) {
	animation-delay: 0s;
}

.loader-letter:nth-child(2) {
	animation-delay: 0.1s;
}

.loader-letter:nth-child(3) {
	animation-delay: 0.2s;
}

.loader-letter:nth-child(4) {
	animation-delay: 0.3s;
}

.loader-letter:nth-child(5) {
	animation-delay: 0.4s;
}

.loader-letter:nth-child(6) {
	animation-delay: 0.5s;
}

.loader-letter:nth-child(7) {
	animation-delay: 0.6s;
}

.loader-letter:nth-child(8) {
	animation-delay: 0.7s;
}

.loader-letter:nth-child(9) {
	animation-delay: 0.8s;
}

.loader-letter:nth-child(10) {
	animation-delay: 0.9s;
}

@keyframes loader-letter-anim {
	0%,
	100% {
		opacity: 0.45;
		transform: translateY(0);
	}
	20% {
		opacity: 1;
		transform: translateY(-3px) scale(1.12);
	}
	40% {
		opacity: 0.7;
		transform: translateY(0);
	}
}

.icon-button {
	position: relative;
	width: 44px;
	height: 44px;
	border-radius: 14px;
	background: var(--color-surface);
	border: 1px solid transparent;
	box-shadow: 0 12px 30px rgba(49, 25, 120, 0.12);
	display: inline-flex;
	align-items: center;
	justify-content: center;
	color: var(--color-text);
	cursor: pointer;
	transition: transform var(--transition), box-shadow var(--transition), border var(--transition);
}

.icon-button:hover {
	transform: translateY(-1px);
	box-shadow: 0 16px 36px rgba(49, 25, 120, 0.16);
}

.icon-button:focus-visible {
	outline: none;
	border-color: var(--color-highlight);
	box-shadow: var(--shadow-focus);
}

.tool-button {
	position: relative;
	width: 44px;
	height: 44px;
	border-radius: 14px;
	border: 1px solid transparent;
	background: var(--color-surface);
	box-shadow: 0 12px 30px rgba(49, 25, 120, 0.12);
	display: inline-flex;
	align-items: center;
	justify-content: center;
	color: var(--color-text);
	cursor: pointer;
	transition: transform var(--transition), box-shadow var(--transition), border var(--transition), background var(--transition);
}

.tool-button:disabled,
.tool-button[aria-disabled="true"] {
	opacity: 0.6;
	cursor: not-allowed;
	box-shadow: none;
}

.tool-button:hover:not(:disabled) {
	transform: translateY(-1px);
	box-shadow: 0 16px 36px rgba(49, 25, 120, 0.16);
}

.tool-button:focus-visible {
	outline: none;
	border-color: var(--color-highlight);
	box-shadow: var(--shadow-focus);
}

.icon-plus {
	position: relative;
	width: 16px;
	height: 16px;
}

.icon-plus::before,
.icon-plus::after {
	content: '';
	position: absolute;
	background: var(--color-text);
	border-radius: 3px;
}

.icon-plus::before {
	width: 16px;
	height: 3px;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}

.icon-plus::after {
	width: 3px;
	height: 16px;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}

.settings-trigger {
	background: #ffffff;
	color: #131313;
}

.settings-trigger .settings-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 36px;
	height: 36px;
}

.settings-icon-gear {
	width: 20px;
	height: 20px;
	fill: currentColor;
	display: block;
}

.settings-trigger:hover:not(:disabled),
.settings-trigger.is-active {
	box-shadow: 0 18px 32px rgba(19, 19, 19, 0.12);
}

.icon-close::before,
.icon-close::after {
	content: '';
	position: absolute;
	inset: 10px 4px;
	border-radius: 2px;
	background: var(--color-text);
}

.icon-close::before {
	transform: rotate(45deg);
}

.icon-close::after {
	transform: rotate(-45deg);
}

.folder-icon::before,
.folder-icon::after {
	content: '';
	position: absolute;
	border-radius: 4px;
	background: var(--color-text);
}

.folder-icon::before {
	left: 3px;
	right: 3px;
	bottom: 5px;
	top: 11px;
	border-radius: 6px;
}

.folder-icon::after {
	top: 5px;
	left: 3px;
	width: 20px;
	height: 9px;
	border-radius: 6px 6px 0 0;
}

.main-stage {
	flex: 1 1 auto;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: flex-start;
	gap: clamp(0.6rem, 2.5vh, 1.2rem);
	width: 100%;
	min-height: 0;
	padding-bottom: clamp(0.5rem, 2vh, 1rem);
}

.hero-block {
	width: min(420px, 100%);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
	gap: 0.4rem;
	padding: 0;
	background: none;
	border: none;
	box-shadow: none;
}

.stage-hint {
	margin: 0;
	font-size: 0.8rem;
	font-weight: 500;
	color: var(--color-muted);
}

.hero-logo {
	width: 60px;
	height: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 0;
	background: none;
}

.mascot-logo {
	width: 42px;
	height: 42px;
	object-fit: contain;
}

body[data-stage="file-ready"] .hero-block,
body[data-stage="rendering"] .hero-block,
body[data-stage="ready"] .hero-block {
	display: none;
}

body[data-stage="ready"] .import-card {
	display: none;
}

body[data-stage="file-ready"] .main-stage,
body[data-stage="ready"] .main-stage {
	justify-content: flex-start;
}

body[data-stage="rendering"] .main-stage {
	justify-content: center;
}

.import-card,
.export-hub,
.process-card {
	position: relative;
	width: 100%;
	background: var(--color-surface-alt);
	border: 1px solid var(--color-border);
	border-radius: var(--radius-lg);
	padding: 0.85rem;
	-webkit-backdrop-filter: blur(18px);
	backdrop-filter: blur(18px);
	box-shadow: var(--shadow-soft);
}

.process-card {
	display: none;
	flex-direction: column;
	gap: 1rem;
}

body[data-stage="rendering"] .process-card,
body[data-stage="ready"] .process-card {
	display: flex;
}
.preference-block {
	width: 100%;
	padding: 0;
	background: none;
	border: none;
	box-shadow: none;
	display: block;
}

.preference-block .card-header {
	margin-bottom: 0.45rem;
	padding: 0;
}

.preference-block .card-header h2 {
	font-size: 0.9rem;
	font-weight: 600;
}

body[data-stage="rendering"] .preference-block,
body[data-stage="ready"] .preference-block {
	display: none;
}

.card-header {
	display: flex;
	align-items: flex-start;
	justify-content: space-between;
	gap: 0.6rem;
	margin-bottom: 0.75rem;
}

.card-header h2 {
	margin: 0;
	font-size: 1.05rem;
	font-weight: 600;
}

.card-subtitle {
	margin: 0.25rem 0 0;
	font-size: 0.85rem;
	color: var(--color-muted);
}

.import-drop {
	display: grid;
	place-items: center;
	gap: 0.35rem;
	min-height: 98px;
	border-radius: var(--radius-lg);
	border: 2px dashed rgba(167, 139, 250, 0.35);
	background: rgba(167, 139, 250, 0.06);
	color: var(--color-text);
	text-align: center;
	padding: 0.75rem;
	cursor: pointer;
	transition: background var(--transition), border var(--transition), transform var(--transition);
}


.import-drop:hover {
	border-color: rgba(167, 139, 250, 0.55);
	background: rgba(167, 139, 250, 0.12);
	transform: translateY(-2px);
}

.import-drop.dragover {
	border-color: var(--color-primary);
	background: rgba(167, 139, 250, 0.18);
}

.import-title {
	font-weight: 600;
	font-size: 1.05rem;
}

.import-subtitle {
	font-size: 0.85rem;
	color: var(--color-muted);
}


.file-summary {
	margin-top: 0.6rem;
	padding: 0.65rem 0.8rem;
	border-radius: var(--radius-md);
	background: rgba(167, 139, 250, 0.08);
	border: 1px solid rgba(167, 139, 250, 0.18);
	display: grid;
	gap: 0.15rem;
}

.file-name {
	margin: 0;
	font-weight: 600;
}

.start-button::before,
.start-button::after {
	content: '';
	position: absolute;
	inset: 0;
	background-image: radial-gradient(circle at 0% 45%, rgba(249, 254, 90, 0.35) 10%, rgba(167, 139, 250, 0) 70%);
	opacity: 0.65;
	transition: opacity var(--transition);
}

.start-button::after {
	background-image: radial-gradient(circle at 100% 55%, rgba(255, 255, 255, 0.42) 5%, rgba(167, 139, 250, 0) 65%);
}

.start-button:hover {
	transform: translateY(-2px);
	box-shadow: 0 22px 40px rgba(167, 139, 250, 0.42);
}

.start-button:hover::before,
.start-button:hover::after {
	opacity: 0;
}

.start-button:focus-visible {
	outline: none;
	box-shadow: var(--shadow-focus);
}

body[data-stage="file-ready"] .start-button,
body[data-stage="ready"] .start-button {
	opacity: 1;
	pointer-events: auto;
	transform: translateY(0);
}

.progress-info {
	margin: 0;
	padding: 1rem 1.1rem;
	border-radius: var(--radius-md);
	border: 1px solid var(--color-border);
	background: rgba(255, 255, 255, 0.65);
	display: none;
}

body[data-stage="rendering"] .progress-info,
body[data-stage="ready"] .progress-info {
	display: block;
}

.progress-list {
	display: grid;
	gap: 0.65rem;
	margin: 0;
	padding: 0;
	list-style: none;
}


.progress-list li {
	position: relative;
	padding: 0.75rem 0.75rem 0.75rem 2.25rem;
	border-radius: var(--radius-sm);
	background: rgba(167, 139, 250, 0.08);
	color: var(--color-text);
	font-size: 0.9rem;
	transition: background var(--transition), color var(--transition), transform var(--transition);
}

.progress-list li::before {
	content: '';
	position: absolute;
	width: 14px;
	height: 14px;
	border-radius: 50%;
	background: rgba(167, 139, 250, 0.35);
	left: 0.9rem;
	top: 50%;
	transform: translateY(-50%);
}

.progress-list li.pending::after {
	content: '...';
	position: absolute;
	right: 0.75rem;
	color: rgba(19, 19, 19, 0.35);
}


.progress-list li.active {
	background: rgba(167, 139, 250, 0.18);
	color: var(--color-primary-dark);
}

.progress-list li.active::before {
	background: var(--color-primary);
	box-shadow: 0 0 0 4px rgba(167, 139, 250, 0.18);
}

.progress-list li.complete {
	background: rgba(51, 184, 100, 0.18);
	color: var(--color-success);
}

.progress-list li.complete::before {
	background: var(--color-success);
	box-shadow: 0 0 0 4px rgba(51, 184, 100, 0.18);
}

.render-loader {
	display: none;
	margin: 0;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 0.75rem;
}

body[data-stage="rendering"] .render-loader {
	display: flex;
}

.loader-caption {
	margin: 0;
	font-size: 0.95rem;
	font-weight: 500;
	color: var(--color-muted);
}

.preference-grid {
	display: grid;
	grid-template-columns: repeat(2, minmax(0, 1fr));
	gap: 0.6rem;
}

.preference-standard,
.preference-premium {
	display: contents;
}

.checkbox-wrapper {
	--checkbox-size: 24px;
	--checkbox-color: #a78bfa;
	--checkbox-shadow: rgba(167, 139, 250, 0.3);
	--checkbox-border: rgba(167, 139, 250, 0.68);
	display: flex;
	align-items: center;
	position: relative;
	cursor: pointer;
	padding: 0.5rem 0.6rem;
	border-radius: var(--radius-sm);
	background: rgba(167, 139, 250, 0.1);
	-webkit-backdrop-filter: blur(14px);
	backdrop-filter: blur(14px);
	border: 1px solid rgba(167, 139, 250, 0.18);
	transition: transform var(--transition), border-color var(--transition), box-shadow var(--transition);
	gap: 0.6rem;
}

.checkbox-wrapper input {
	position: absolute;
	opacity: 0;
	cursor: pointer;
	width: 0;
	height: 0;
}

.checkbox-wrapper .checkmark {
	position: relative;
	width: var(--checkbox-size);
	height: var(--checkbox-size);
	border: 2px solid var(--checkbox-border);
	border-radius: 8px;
	transition: all 0.35s cubic-bezier(0.68, -0.55, 0.265, 1.55);
	display: flex;
	justify-content: center;
	align-items: center;
	background: rgba(12, 12, 12, 0.3);
	box-shadow: 0 0 16px var(--checkbox-shadow);
	overflow: hidden;
}

.checkbox-wrapper .checkmark::before {
	content: '';
	position: absolute;
	width: 100%;
	height: 100%;
	background: linear-gradient(45deg, var(--checkbox-color), #d6cbff);
	opacity: 0;
	transition: all 0.35s cubic-bezier(0.68, -0.55, 0.265, 1.55);
	transform: scale(0) rotate(-45deg);
}

.checkbox-wrapper input:checked ~ .checkmark::before {
	opacity: 1;
	transform: scale(1) rotate(0deg);
}

.checkbox-wrapper .checkmark svg {
	width: 0;
	height: 0;
	color: #101010;
	z-index: 1;
	transition: all 0.35s cubic-bezier(0.68, -0.55, 0.265, 1.55);
	filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.45));
}

.checkbox-wrapper input:checked ~ .checkmark svg {
	width: 18px;
	height: 18px;
	transform: rotate(360deg);
}

.checkbox-wrapper:hover .checkmark {
	border-color: var(--checkbox-color);
	transform: scale(1.04);
	box-shadow:
		0 0 16px var(--checkbox-shadow),
		0 0 28px var(--checkbox-shadow),
		inset 0 0 10px rgba(167, 139, 250, 0.25);
}

.checkbox-wrapper input:checked ~ .checkmark {
	animation: checkboxPulse 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes checkboxPulse {
	0% {
		transform: scale(1);
		box-shadow: 0 0 20px var(--checkbox-shadow);
	}

	50% {
		transform: scale(0.92);
		box-shadow:
			0 0 28px var(--checkbox-shadow),
			0 0 48px var(--checkbox-shadow);
	}

	100% {
		transform: scale(1);
		box-shadow: 0 0 20px var(--checkbox-shadow);
	}
}

.checkbox-wrapper .label {
	margin-left: 0.15rem;
	font-size: 0.78rem;
	font-weight: 600;
	color: var(--color-text);
	transition: color 0.3s ease, transform 0.3s ease;
}

.checkbox-wrapper:hover .label {
	color: var(--checkbox-color);
	transform: translateX(3px);
}


.premium-button {
	width: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 0.45rem;
	padding: 0.68rem 1rem;
	border: 1px solid transparent;
	border-radius: 28px;
	font-weight: 600;
	font-size: 0.85rem;
	cursor: pointer;
	color: #ffffff;
	text-shadow: 1px 1px 2px rgba(136, 0, 136, 0.45);
	background: linear-gradient(
		18deg,
		#880088,
		#aa2068,
		#cc3f47,
		#de6f3d,
		#f09f33,
		#de6f3d,
		#cc3f47,
		#aa2068,
		#880088
	);
	background-size: 320%;
	transition: background-position 0.35s ease, transform var(--transition), box-shadow var(--transition), border var(--transition);
}

.premium-button svg {
	width: 22px;
	height: 22px;
	fill: #f09f33;
	transition: fill 0.3s ease;
}

.premium-button:hover {
	background-position: right center;
	transform: translateY(-1px);
	box-shadow: 0 16px 36px rgba(240, 159, 51, 0.25);
}

.premium-button:hover svg {
	fill: #ffffff;
}

.premium-button[aria-pressed="true"] {
	box-shadow: 0 18px 36px rgba(240, 159, 51, 0.35);
	border-color: rgba(255, 255, 255, 0.35);
}

.premium-button:focus-visible {
	outline: none;
	box-shadow: var(--shadow-focus);
}

.export-hub {
	width: 100%;
	opacity: 0;
	transform: translateY(12px);
	pointer-events: none;
	transition: opacity var(--transition), transform var(--transition);
	display: none;
}

body[data-stage="ready"] #export-hub {
	display: block;
	opacity: 1;
	transform: translateY(0);
	pointer-events: auto;
}

.export-picker {
	display: flex;
	justify-content: space-between;
	gap: 0.6rem;
	margin-bottom: 1.25rem;
}

.export-option {
	flex: 1;
	padding: 0.75rem 1rem;
	border-radius: 16px;
	border: 1px solid var(--color-border);
	background: rgba(167, 139, 250, 0.08);
	color: var(--color-text);
	font-weight: 600;
	cursor: pointer;
	transition: background var(--transition), color var(--transition), border var(--transition), box-shadow var(--transition);
}

.export-option[aria-pressed="true"] {
	background: var(--color-primary);
	color: #ffffff;
	border-color: transparent;
	box-shadow: 0 14px 28px rgba(167, 139, 250, 0.32);
}

.export-option[data-disabled="true"] {
	opacity: 0.4;
	cursor: not-allowed;
}

.export-actions {
	display: flex;
	align-items: stretch;
	gap: 0.75rem;
}

.download-control {
	flex: 1;
	display: flex;
	justify-content: flex-start;
}

.download-trigger {
	position: relative;
	display: grid;
	grid-template-columns: auto 1fr;
	grid-template-rows: auto auto;
	column-gap: 0.65rem;
	row-gap: 0.1rem;
	align-items: center;
	min-width: 170px;
	padding: 0.55rem 1rem 0.55rem 0.55rem;
	border-radius: 999px;
	border: 2px solid rgba(91, 91, 240, 0.65);
	background: rgba(167, 139, 250, 0.12);
	color: var(--color-text);
	font-weight: 600;
	cursor: pointer;
	transition: transform var(--transition), border-color var(--transition), box-shadow var(--transition), background var(--transition);
	overflow: hidden;
}

.download-trigger:hover {
	transform: translateY(-1px);
	border-color: rgba(91, 91, 240, 0.85);
	box-shadow: 0 16px 36px rgba(84, 71, 202, 0.18);
}

.download-trigger:focus-visible {
	outline: none;
	box-shadow: var(--shadow-focus);
}

.download-trigger.is-active {
	cursor: pointer;
	border-color: rgba(91, 91, 240, 0.75);
	background: rgba(167, 139, 250, 0.18);
}

.download-trigger.is-complete {
	border-color: rgba(35, 174, 35, 0.85);
	box-shadow: 0 14px 32px rgba(35, 174, 35, 0.16);
}

.download-trigger.is-error {
	border-color: rgba(209, 76, 76, 0.85);
}

.download-trigger.is-cancelable {
	cursor: pointer;
}

.download-circle {
	grid-row: 1 / span 2;
	grid-column: 1;
	width: 48px;
	height: 48px;
	border-radius: 50%;
	background: linear-gradient(135deg, rgba(91, 91, 240, 1), rgba(167, 139, 250, 1));
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.75);
	transition: box-shadow 0.4s ease, transform 0.4s ease;
}

.download-trigger.is-active .download-circle {
	animation: downloadPulse 1.1s ease-in-out infinite;
}

.download-circle-progress {
	position: absolute;
	inset: auto 0 0 0;
	height: var(--download-circle-progress, 0%);
	background: rgba(255, 255, 255, 0.28);
	transition: height 0.25s ease;
}

.download-icon {
	width: 26px;
	height: 26px;
	color: #ffffff;
	transition: opacity 0.3s ease, transform 0.3s ease;
}

.download-square {
	position: absolute;
	width: 14px;
	height: 14px;
	border-radius: 3px;
	background: #ffffff;
	opacity: 0;
	transform: scale(0.6);
	transition: opacity 0.3s ease, transform 0.3s ease;
}

.download-trigger.is-complete .download-icon {
	opacity: 0;
	transform: translateY(-6px);
}

.download-trigger.is-complete .download-square {
	opacity: 1;
	transform: scale(1);
}

.download-title {
	grid-column: 2;
	grid-row: 1;
	justify-self: start;
	font-size: 0.95rem;
	font-weight: 600;
	color: var(--color-text);
	transition: opacity 0.3s ease, transform 0.3s ease;
}

.download-title-complete {
	opacity: 0;
	transform: translateY(6px);
}

.download-trigger.is-complete .download-title-idle {
	opacity: 0;
	transform: translateY(-6px);
}

.download-trigger.is-complete .download-title-complete {
	opacity: 1;
	transform: translateY(0);
}

.download-status {
	grid-column: 2;
	grid-row: 2;
	font-size: 0.7rem;
	font-weight: 500;
	color: var(--color-muted);
	min-height: 1em;
	transition: color 0.3s ease;
}

.download-trigger.is-error .download-status {
	color: rgba(209, 76, 76, 0.9);
}

.download-trigger.is-complete .download-status {
	color: rgba(35, 174, 35, 0.85);
}

@keyframes downloadPulse {
	0% {
		box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.65);
	}

	70% {
		box-shadow: 0 0 0 16px rgba(255, 255, 255, 0);
	}

	100% {
		box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
	}
}

.secondary-action {
	padding: 0.85rem 1.5rem;
	border-radius: 18px;
	border: 1px solid var(--color-border-strong);
	background: rgba(255, 255, 255, 0.65);
	font-weight: 600;
	color: var(--color-text);
	cursor: pointer;
	transition: transform var(--transition), border var(--transition), box-shadow var(--transition);
}

.secondary-action:hover {
	transform: translateY(-2px);
	border-color: rgba(19, 19, 19, 0.26);
	box-shadow: 0 12px 28px rgba(19, 19, 19, 0.08);
}

.secondary-action:focus-visible {
	outline: none;
	box-shadow: var(--shadow-focus);
}

.settings-sheet {
	position: fixed;
	top: clamp(1.5rem, 4vh, 3rem);
	right: clamp(1.5rem, 4vw, 3rem);
	width: min(320px, 85vw);
	max-height: calc(100vh - 3rem);
	background: rgba(255, 255, 255, 0.96);
	border-radius: var(--radius-lg);
	border: 1px solid var(--color-border);
	-webkit-backdrop-filter: blur(18px);
	backdrop-filter: blur(18px);
	box-shadow: 0 30px 60px rgba(19, 19, 19, 0.16);
	transform: translateY(-12px) scale(0.96);
	opacity: 0;
	pointer-events: none;
	transition: opacity var(--transition), transform var(--transition);
	z-index: 40;
}

body.settings-open .settings-sheet {
	opacity: 1;
	transform: translateY(0) scale(1);
	pointer-events: auto;
}

.settings-card {
	display: flex;
	flex-direction: column;
	padding: 1.5rem;
	overflow-y: auto;
	max-height: calc(100vh - 6rem);
	gap: 1.25rem;
}

.settings-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 0.75rem;
}

.settings-header h2 {
	margin: 0;
	font-size: 1.05rem;
}

.settings-menu {
	display: grid;
	gap: 0.65rem;
}

.settings-item {
	padding: 0.85rem 1rem;
	border-radius: var(--radius-md);
	border: 1px solid rgba(19, 19, 19, 0.08);
	background: rgba(110, 72, 246, 0.05);
	color: var(--color-text);
	font-weight: 500;
	text-align: left;
	cursor: pointer;
	transition: border var(--transition), transform var(--transition), box-shadow var(--transition);
	text-decoration: none;
}

.settings-item:hover {
	transform: translateY(-1px);
	border-color: rgba(110, 72, 246, 0.38);
	box-shadow: 0 10px 22px rgba(110, 72, 246, 0.18);
}

.settings-section {
	display: flex;
	flex-direction: column;
	gap: 0.85rem;
}

.settings-label {
	margin: 0;
	font-size: 0.85rem;
	font-weight: 600;
	letter-spacing: 0.08em;
	text-transform: uppercase;
	color: var(--color-muted);
}

.settings-group {
	display: grid;
	gap: 0.5rem;
}

.settings-field {
	font-size: 0.9rem;
	font-weight: 500;
	color: var(--color-text);
	cursor: pointer;
}

#longcat-key {
	width: 100%;
	padding: 0.65rem 0.75rem;
	border-radius: var(--radius-sm);
	border: 1px solid var(--color-border-strong);
	background: rgba(255, 255, 255, 0.75);
	font-family: inherit;
}

#longcat-key:focus-visible {
	outline: none;
	border-color: var(--color-primary);
	box-shadow: var(--shadow-focus);
}

.preview-modal {
	position: fixed;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: clamp(1rem, 4vh, 2.5rem);
	background: rgba(11, 12, 34, 0.52);
	-webkit-backdrop-filter: blur(12px);
	backdrop-filter: blur(12px);
	opacity: 0;
	pointer-events: none;
	transition: opacity var(--transition);
	z-index: 60;
}

.preview-modal[aria-hidden="false"] {
	opacity: 1;
	pointer-events: auto;
}

.preview-card {
	width: min(1080px, 100%);
	max-height: calc(100vh - 4rem);
	background: rgba(255, 255, 255, 0.98);
	border-radius: var(--radius-lg);
	box-shadow: 0 60px 90px rgba(10, 10, 20, 0.28);
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.preview-header,
.preview-footer {
	padding: 1.25rem 1.75rem;
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 1rem;
	flex-wrap: wrap;
}

.preview-save {
	padding: 0.85rem 1.75rem;
	border-radius: 999px;
	border: none;
	background: linear-gradient(135deg, #6e48f6 0%, #9a7bff 85%);
	color: #ffffff;
	font-weight: 600;
	font-size: 0.95rem;
	cursor: pointer;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 22px 36px rgba(110, 72, 246, 0.28);
	transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
}

.preview-save:hover:not(:disabled) {
	transform: translateY(-2px);
	box-shadow: 0 28px 48px rgba(110, 72, 246, 0.34);
}

.preview-save:focus-visible {
	outline: none;
	box-shadow: 0 0 0 3px rgba(249, 254, 90, 0.45), 0 22px 36px rgba(110, 72, 246, 0.28);
}

.preview-save:disabled {
	opacity: 0.55;
	cursor: not-allowed;
	box-shadow: none;
}

.preview-content {
	flex: 1;
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
	gap: 1rem;
	padding: 0 1.75rem 1.75rem;
	overflow: auto;
}

.preview-carousel {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
	gap: 1rem;
	padding-right: 0.25rem;
}

.preview-carousel .preview-slide {
	display: flex;
	flex-direction: column;
	justify-content: center;
	border-radius: var(--radius-md);
	padding: 1rem 1.25rem;
	background: rgba(19, 19, 19, 0.04);
	border: 1px solid var(--color-border);
	transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
	min-height: 180px;
}

.preview-carousel .preview-slide.active {
	transform: translateY(-6px);
	box-shadow: 0 16px 26px rgba(19, 19, 19, 0.18);
	border-color: rgba(110, 72, 246, 0.38);
}

.preview-structure {
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
}

.preview-text-only {
	display: flex;
	flex-direction: column;
	gap: 0.65rem;
}

.preview-headline {
	margin: 0;
	font-size: 1.05rem;
	line-height: 1.3;
	color: var(--color-text);
}

.preview-body {
	margin: 0;
	color: var(--color-muted-strong);
	line-height: 1.45;
}

.preview-bullets {
	display: grid;
	gap: 0.5rem;
}

.preview-bullet {
	padding: 0.5rem 0.6rem;
	border-radius: var(--radius-sm);
	background: rgba(19, 19, 19, 0.04);
}

.preview-bullet h4 {
	margin: 0 0 0.2rem;
	font-size: 0.95rem;
	color: var(--color-text);
}

.preview-bullet p {
	margin: 0;
	color: var(--color-muted-strong);
	line-height: 1.4;
}

.preview-chart-note {
	padding: 0.65rem 0.75rem;
	border-radius: var(--radius-sm);
	background: rgba(43, 76, 126, 0.08);
	color: var(--color-muted);
	font-size: 0.85rem;
	line-height: 1.35;
}

.preview-grid-headline {
	margin: 0;
	font-size: 1rem;
	color: var(--color-text);
	line-height: 1.3;
}

.preview-grid-list {
	display: grid;
	gap: 0.6rem;
}

.preview-grid-cell h4 {
	margin: 0 0 0.15rem;
	font-size: 0.9rem;
	color: var(--color-text);
}

.preview-grid-cell p {
	margin: 0;
	color: var(--color-muted-strong);
	line-height: 1.35;
}

.slide-editor {
	display: flex;
	flex-direction: column;
	gap: 1rem;
	max-height: calc(100% - 1rem);
}

.info-banner {
	border-left: 4px solid var(--color-primary);
	background: rgba(110, 72, 246, 0.08);
	padding: 0.85rem 1rem;
	border-radius: var(--radius-sm);
	color: var(--color-text);
}

.slide-list {
	display: flex;
	flex-direction: column;
	gap: 1rem;
	overflow-y: auto;
	padding-right: 0.5rem;
}

.slide-card {
	border: 1px solid var(--color-border);
	border-radius: var(--radius-md);
	padding: 1rem;
	background: var(--color-surface);
	display: grid;
	gap: 0.75rem;
}

.slide-card.active {
	border-color: var(--color-primary);
	box-shadow: 0 0 0 3px rgba(110, 72, 246, 0.18);
}

.slide-card header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 0.75rem;
}

.slide-card textarea,
.slide-card input[type="text"],
.slide-card select {
	width: 100%;
	padding: 0.6rem 0.75rem;
	border-radius: var(--radius-sm);
	border: 1px solid var(--color-border-strong);
	font-family: inherit;
	resize: vertical;
	min-height: 2.4rem;
}

.slide-card textarea:focus-visible,
.slide-card input[type="text"]:focus-visible,
.slide-card select:focus-visible {
	outline: none;
	border-color: var(--color-primary);
	box-shadow: var(--shadow-focus);
}

.bullet-fields {
	display: grid;
	gap: 0.65rem;
}

.slide-controls {
	display: flex;
	gap: 0.5rem;
	flex-wrap: wrap;
}

.pill,
.pill-secondary {
	padding: 0.6rem 1.1rem;
	border-radius: 999px;
	border: 1px solid var(--color-border-strong);
	background: rgba(110, 72, 246, 0.08);
	cursor: pointer;
	transition: border var(--transition), background var(--transition), color var(--transition);
}

.pill:hover {
	border-color: rgba(110, 72, 246, 0.45);
}

.pill-secondary {
	background: rgba(255, 255, 255, 0.75);
}

.pill:disabled,
.secondary-action:disabled,
.start-button:disabled,
.download-trigger[disabled] {
	opacity: 0.55;
	cursor: not-allowed;
	box-shadow: none;
}

#export-canvas {
	display: none;
}

.toast {
	position: fixed;
	bottom: 1.5rem;
	right: 1.5rem;
	background: rgba(19, 19, 19, 0.88);
	color: #ffffff;
	border-radius: var(--radius-md);
	padding: 0.85rem 1.25rem;
	box-shadow: 0 20px 40px rgba(19, 19, 19, 0.28);
	opacity: 0;
	transform: translateY(10px);
	transition: opacity 0.25s ease, transform 0.25s ease;
	z-index: 80;
}

.toast.visible {
	opacity: 1;
	transform: translateY(0);
}

.toast-error {
	background: rgba(220, 38, 38, 0.92);
}

@media (max-width: 1024px) {
	.control-grid {
		grid-template-columns: 1fr;
	}
}

@media (max-width: 640px) {
	.app-shell {
		padding: 0.85rem;
	}

	.top-bar {
		border-radius: var(--radius-sm);
	}

	.hero-block,
	.import-card,
	.preference-block,
	.export-hub {
		border-radius: var(--radius-md);
	}

	.import-drop {
		min-height: 96px;
	}

	.preference-grid {
		gap: 0.65rem;
	}

	.export-picker {
		flex-direction: column;
	}

	.export-option {
		width: 100%;
	}

	.export-actions {
		flex-direction: column;
		align-items: stretch;
	}

	.download-control {
		width: 100%;
	}

	.download-trigger {
		width: 100%;
	}


@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

